# 软件工程里的"重用"--从中台说起

前段一个关于“中台”的文章被广为传转发，有挺中台的也有dis中台的。有朋友说，身边确实有需求要做这个的，你怎么看，有什么思路么。这里我就整理一下，大概思路是从中台说起，然后说下软件工程里的“重用”，最后说一些企业内部开源的思路和想法。漫谈，没有什么太强的目的和意图，看的人也不用强加看法上纲上线。

套用一个路子，凡事都离不开“从哪来，是什么，到哪去”这三个根本话题，中台也不例外；但是“是什么”和“到哪去”我也不知道，也说不清楚...就是作为铺垫先说“从哪来”，毕竟这个信息是公开渠道可以获得的，即使说不清楚也可以说的八九不离十。按照广为传颂的，大概是首富去了欧洲参观，看到有些公司可以快速的开发同质的产品（有可能是软件，比如游戏），并且赚了大钱，首富颇为欣赏这个思路。不知道当时欧洲公司英语之类的怎么介绍这个，首富用自己的语言天赋和灵感给这个办法一个名字“中台”。并且叮嘱属下回去好好研究，深入践行。说个题外话，搞游戏的，还有搞网站的，批量生产游戏和站点是个标准套路，游戏和网站的产销是一个完整的产业链，这个并不神秘也不稀奇。一般搞游戏的，要么偶出爆款，要么就是一直出大路货然后靠量发财...频出爆款的，那是真实力。回到话题里，首富的这个“殷切期望”，属下深入解读之后，提出了一个可行且有意义的实践方案--合并首富旗下多条业务线通用的部分。不得不说首富手下有能人，一方面这里确实有很多地方是重复建设，包括业务也包括技术，确实需要整合；一方面这个方案实际是一个组织结构调整的好的理由。大的组织定期“重组”既是个习惯，也是个需要...时间飞快，很快这个就“落地”了，具体做了什么，有哪些收效，有哪些可度量结果，这些都不重要，重要的是这个过程被迅速的迭代成了一个“故事”。要知道，首富旗下，能讲故事是基本技能，江湖传闻“自带PR属性”，我认为这说法不是贬义，但是其他人具体怎么理解，就因人而异了。到这里，事情发生了重大的变化：“中台”变成了一个技术概念。至于怎么做到的，是作者有意升华出来的，还是读者自己“揣摩”和“升华”，无从考之。首富旗下除了有能把老板想法落地的人才，也有能讲故事的人才，但是最重要是首富手下有能挖坑的人才...所谓小坑怡情...这种“可重用”“提高生产力”的神奇事物，只有在推广到市场上，才能为首富创造更大的价值--不仅给我省钱，还得给我赚钱。首富的思路清晰明了，挖坑人心领神会--内部技术硬邦邦的真家伙，从云部门推出去给市场检验一下~云部门具有超强的执行力，毕竟执行力“不好”的都在考评环节“贡献社会人才”了。执行的结果就是：泱泱大厂是不做落地项目的--可以理解，一个是做不好容易跌份，一个是成本确实高。题外话，现在说也就是前年，某天府之国的汽车大厂找某云落地一“平台”，最后某云提出“（项目）钱我不要了，但是平台我也不做了”，被该车厂CIO痛骂...这是段子...这个大厂被坑之后，恰逢去年经济不景气汽车行业不景气，在合资车品牌里领跌...事情没有因果，都是运气。大厂自己不落地可以，但是总还是有市场需求的，此时天降奇缘：更有钱的金主出现了，要说该金主在赚钱方面真的是横扫云这种苦逼的生意...以产地为“护城河”，市值一涨再涨...中东什么黑色黄金还需要开采，这个比开采还省事...欧洲洋人的葡萄酒还分什么产地年份，这个东西要简单很多...金主要开拓“网上渠道”...不知道这种躺钱的地方，怎么还会有改进赚钱方式方法的想法...贫穷是限制我想象力的...不过客观上看起来，一个是这种东西不需要网上渠道，一个是网上渠道一定会和既有的分销体系在利益上有冲突，一个是真的需要网上营销也可以用既有方案，再不济，随手就收购一个酒类电商平台，应该是绰绰有余...所谓“坑不单行”...最后也是闹得沸沸扬扬...以至于很多人都开始怀疑“中台”了。为了挽回声誉，神秘补刀手出场，迅速给这个事情定了个性：中台不是谁做都可以的，涉及到组织调整，是一把手工程。这个说法类似“衣服好不好看，也分谁穿”，属于高级黑...不仅搞这个事的人级别不够，而且你组织结构也不够“先进”...不是车不行，是开车的人不行，是路不行。自古挖坑不留名，要命还看神补刀。跑题了...

回到话题本身，还是有不少人提想要建设中台的，我们来探讨下这其中的原委。先说一部分结论：对中台有期望的本质都是在寻求某种“重用”；然后本文结尾，在把这个结论补齐。

提到重用，我们把话题转到20世纪最伟大的发明，计算机。到目前为止，我们用的计算机体系主体还是诺伊曼体系，在这个体系内，对于一个程序，在给定的输入情况下，输出是确定的。人们也在尝试用这个体系去解决“不确定输入下”如何获取“尽可能确定”的输出，或者说“多大程度的确定性”，这个主要是因为输入的不确定性，并非诺伊曼计算体系的原因。在这个大的技术背景和前提下，配合了一些类似“do not repeat yourself”之类的指导思想，计算机工程里呈现了一个有趣的特征：机器尽可能的做重复的事情，但是计算机相关人员在极力的避免“重复劳动”。为了避免重复劳动，计算机领域人员在过去70多年时间(从1946年开始计算)里先后实践和找到了很多达成共识的“避免重复劳动”，也就是“重用”的方法：
1. 拷贝、粘贴、复制。这些最基本的重用，其实每天都主导着大多数计算机领域工作人员的工作...
2. 程序，或者称为可执行程序
3. 类库。这个可能是被大家最熟悉的重用方式，封装起来被反复调用
4. 框架。框架很大程度是面向编程人员的。计算机领域工作人员其中一部分是程序员，程序员通过框架可以提高开发速度和质量
5. 中间件。IBM在90年代，针对应用开发过程中通用功能，提出了中间件的概念，也就是以独立软件方式提供重复能力。这个领域先后诞生了那个时期领先的行业巨头
6. 服务。相比于以上的几种，服务是一个跨越。因为服务这个词汇的抽象性，我们这里把服务约束到“REST”，以方便后续的讨论。最具有标志性，也是被最多人熟知的，是另外一个首富，在2000年后提出来的。当时以贝索斯为领导的亚马逊团队，发现内部团队之间在实现功能时候会采用不同的工具和方式，这导致了“合作”的难度大大增加，而如果过度的约束团队的工具和方式，又有副作用（比如学习成本，比如创新被压制）。这个背景下，亚马逊开始倡导“注意接口重用，具体实现各自为政”的工作指导思想。而这里的“接口”和“实现”，就是REST API和“服务”。这个“基于接口重用的服务体系”后来衍生出了“云计算”这种影响深远的东西...当然，这个思路并非只有亚马逊有，只是亚马逊比较早的明确提出这个论调。题外话一下，亚马逊也是个强调“讲故事”的地方...东西方首富在这里有了异曲同工的地方...
7. 平台。实际上平台并不是计算机领域重用的方法，这里列出来主要是为了枚举我们常用的“重用”的方式和方法

在列举了常见的重用方法之后，我们简单把他们分下类，在计算机领域为了“重用”我们有这么几个类别：
1. 劳动重复。拷贝粘贴就是重复劳动的典型，重复劳动，产生出“重用”的工作产物
2. 代码重用与“模式重用”。如果我们可以有效统计和分析代码，会知道很多很多源码里，其实很大程度上，是重复的...这个部分在抽象一次以后，就是常见的“编程模式”
3. 组件重用。框架和类库都是这个分类里的
5. 工程重用。一个已经落地的项目，需要建设另外一个类似的项目，这时候很多部分是工程重用
6. 方法重用。一般一个方法被验证可行以后，可以用同样的方法去尝试解决类似问题
7. 能力重用。人们希望可以重现某种能力，为此一直孜孜不倦的在努力...云计算是这个分类的典型
8. 思想重用。这个部分我是真的不懂，实在是编不下去了...但是我承认又可重用的“思想”，并且很佩服这类

虽然大家如此追求“重用”，但是重用并不简单，主要有这样几种原因：
1. 经过多年发展，很多需要重用的东西，都已经有了可以重用的实际东西。无论类库、还是框架、还是模式...想弄出又新又实用的“可重用”很困难。也可以这样说：面对一个确定的问题，找到可重用的方式、方法、工具的可能性，远大于找不到的可能性
2. 重用需要很高的抽象能力。虽然可能多数人都不喜欢重复自己的劳动，但是真的把自己重复的事情抽象出来，并不容易。人和人之间的抽象能力，差别是很大的。落实到计算机领域，不仅需要抽象出来，还需要能“制造”出来，难上加难
3. “可重用”还需要很多实践的检验。即使做出了重用的工具，能够经得住实践的考验也非常难。不仅仅是“稳定可靠”的重复很困难，还有易用性，普适性等很多因素
4. 应用层的东西，因为需求总是变化，因为市场总是变化，因为业务总是变化，开发出重用组件的可能性更低。应用开发领域，包括配套的工程领域，比如测试，为了兼顾重用和客户化，最后大多数都是通过重复劳动来实现

因为这些很实际的困难，开发出“重用”的东西并被接受变得越来越稀有...

回到“中台”这个话题，不少提到中台需求的人，我理解实际他们在寻找的是“贴近应用层、可重用的技术能力”。这里有两个特点，一个是贴近应用层，一个是重复的目标是“能力重复”（比如可以批量开发“套娃”产品，类似中后期的诺基亚手机...）。通常有这些想法的是“业务领域技术管理类”人员，主要因为他们看到的问题是业务问题，希望通过技术重用来解决。当然了，这可能是我身边世界上最难的两个问题，我觉得原因有这么几个：
1. 业务问题本身差异很大，即使看起来类似的东西，没有分析出来的差异化也常常是超出人们想象的。即使同行业，也很少有可以直接复制的东西。因为一旦可以复制，行业竞争就会加剧，所以活下来的都是有“不可复制”能力的
2. 业务问题变化很快，即使开发出重用的东西，也可能很快就无法重用...或者说：在输入持续变化的情况下，很难构建重用的能力
